<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
<!-- only include scripts that are necessary for jasmine testing
	 as you can see, the paths are incorrect from maven perspective
	 but they are correct from jasmine perspective -->

	<script src="//api.tiles.mapbox.com/mapbox.js/v2.1.8/mapbox.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
	<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
	
	<script src="src/main/resources/static/scripts/interactions.js" type="text/javascript"></script>
	<script src="src/main/resources/static/scripts/map.js" type="text/javascript"></script>
	
</head>

<body>

<div id="rightPane" class="container col-lg-7 col-md-7" th:fragment="map">
    <div style="margin-right: -15px;">
	<div class="map-border">
		<div class="row">
			<div class="container col-lg-5 col-md-5 col-sm-5">
				<div class="pull-left">
					<button id="locateMe" type="button" class="remove-outline btn btn-default">Locate Me</button>
				<!-- <span id="resizeLayout" style="cursor: pointer; z-index: 1001; color:rgba(0,0,0,.75); font-size:2em;" class="glyphicon glyphicon-resize-small"></span> -->	
				</div>
				<div class="pull-left">
					<button id="addEventBtn" type="button" class="remove-outline btn btn-default">Add New Event</button>
				</div>
			</div>
			
			<div class="container col-lg-7 col-md-7 col-sm-7">
				
				<form action="javascript:void(0);"  class="form-inline">
					<div class="pull-right form-group">
		    			<input id="zipCode" type="text" style="width:85px;" class="form-control" placeholder="Zip Code"/>
		    		    <input id="enterZip" href="#zipCodeErrorBox" value="Go" type="submit" class="remove-outline btn btn-default"/>	
		  			</div>
		  			
		  			<a class="pull-right" id="zipSearching" style=" display: none; margin: 6px;">searching...</a>
	  			</form>
  			</div>
		</div>
		<div id="map-canvas">
		<div id="zipCodeErrorBox" class="zipcode-error" align="center"></div>
		<div class="leaflet-left leaflet-bottom">
			<div class="map-size-control leaflet-bar leaflet-control" style="padding: 5px 5px 5px 5px;">
				<a id="resizeLayout" href="#" class="map-glyphicon glyphicon glyphicon-resize-small"></a>
			</div>
		</div>
			
		</div>
	    
	</div>
	</div>

    <div id="map-legend-container">
		<div class="map-legend-item">
			<figure>
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAzCAIAAADgokQjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQHSURBVFhHrZbLaxRBEIf7mos3b178Jzx49k8QvHj15s2zDzyIEMhFFBFBBQUVBRGN+ECMIsZoYgKi8e3GB6J48i1x12/y69RWaqZnF7T4scx2V3/dU11dPanXapOTb+aOf3665/vLXb8Xdvx5t7PLL8+00E5v9itYkT518+2Tvd/eLhFLohcfPPOYmjXQWdHjsS/GfbWl+3h9d3ZNd2ZV916qfnmmhXabA//G94h0nHhxDetsrUAQS6IXHzkzqj7BCvr9y+87OxblPb8hskrCU0MYCyGzlqxPJ3xCD1xyXfYSEPw2ZPrkbEcBWdjWnR6Jg6Wr6dOBdI3f0C4xirEQqhDNdoTNdLaFDjS3Ng4zHUtT45tmDqdbod3EWEGgCVvReRdlSEus76Rf+0bGe90ev6XlI+0BNMWnonM0aCLDgqvXhbTAwqFPj77kJUKvlzIVZkUnRlr4g9XRzwvi8zMfoP/8uMjyb6cfwcEER8uHnDjQAxduYZF4iVPpYfDx0vIhJ4Xl0bp+H8scS+eDFBaJ5Yde5MMFDSbkpET0CU5W3N39zFjDCH+fS9BgQk46QaohEjE9mK4PPwGe+PudgAYTctKWWoc0/AR1tAQTcnq9vVp7PWGGmaCEVtpAznFvPKLtE5TQSIe2ivv86FeeSqeUY+lz0avl0OrEQs75TgEKHhJ5zeEMXIn2UtarnFX5znnVhdkYHIoi2R24Eu30Bn+ksMDMdUbBebYx+vHi/hBRCYiG6oFEbz04cKDBzHQuFP6jkDm+tgBipdQyfnnWC9EbKpqyBemSqugYVztNLzb3/VRboGjJhJgWtfOsl6CXB7VLEOBAEzbTrcRb9FVyteT669Oil0B4qlERh2OXX6Zjup64Hv14W3Jdegk/t65Wu5iwPp1yrHPLt4ohhhejGAvBLlWsT8cs90sXd0l2ZUPIrCVbQcdUGFou2EbpcDI2U5Yt0i07Gw9Xo7SZKHwqYZGOaXuHjI/FxG+mWQMdU3x8+pekBK/HRNZMJ2FVfNrzR3mCpyV4sGY6pvxBpW9KXZ4o5Im3Iv3G9LyqW+MGWLjxwTOPqVmk42q6OHFfG1AvnyqE9OLjh2TKsvXp5sEAE0mm+uM/ePS5Qju93tkImSi6tXrXM5cmJNsA1WersbSbjx9otIpuf6zbxpw4dwUdPX1B9ZkixYeKShUttMvB/I1gzEy3jsBFh46f3X/kpAqcdpJnWmiXg5/DOH26NZXQyDZA4VbjwAna6Aw2OlKF4Nda5PB/6Iid9H//ia4JPC5I6AH0gRNIHiq1o/v0+gRhjkZ5LjKCMQefJiRKkHfwA42Wz6rMWr0r8pSg4GmETBxYxYaRH5IpyxbpZn7MQOUxNSvSG60F1GC93l+ttfqRQ8WxNAAAAABJRU5ErkJggg==" alt="Your Current Location" />
				<figcaption>Your Location</figcaption>
			</figure>
		</div>
	</div>

		<div class="modal fade" id="geolocation-unsupported-modal"
			tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title">Geolocation Failure</h4>
					</div>

					<div class="modal-body">
						<span>Gather can't determine your location.
							Unfortunately, geolocation is required to use Grub Scout.</span>
					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="general-failure-modal" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Application Failure</h4>
				</div>

				<div class="modal-body">
					<span>An application failure has occurred.  Please reload the page, or try again later.</span>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="anonymous-user-add-event-failure-modal" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Anonymous User Attempts to Add Event</h4>
				</div>

				<div class="modal-body">
					<span>As an anonymous user, you are not able to to add new events of your own.</span><br></br><br></br>
					<span>Please sign in in the front page or register with the button below.</span>
					
				</div>
				<div class="modal-footer">
					<button id="failureModalRegister" type="button" class="btn btn-default" data-dismiss="modal">Register</button>
					<button id="failureModalClose" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="edit-new-event-modal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<form class="form-horizontal" id="new-event-form">
						<div class="modal-header">
							<h4 class="modal-title">Edit New Event</h4>
						</div>

						<div class="modal-body">
							<div class="form-group">
								<label class="col-xs-4 control-label">Event Name</label>
								<div class="col-xs-8">
									<input type="text" class="form-control" name="eventName" id="new-event-name" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-xs-4 control-label">Description</label>
								<div class="col-xs-8">
									<input type="text" class="form-control" name="eventDescription" id="new-event-description"/>
								</div>
							</div>
							<div class="form-group">
								<label class="col-xs-4 control-label">Category</label>
								<div class="col-xs-8">
									<!--  <input type="text" class="form-control" name="eventLocation" id="new-event-category"/> -->
									<select class="form-control" id="new-event-category">
								    </select>
								</div>
							</div>
							<div class="form-group">
								<label class="col-xs-4 control-label">Time</label>
								<div class="col-xs-8">
									<!-- <input type="text" class="form-control" name="eventTime" id="new-event-time"/> -->
									<input class="form-control" id="new-event-time"/>
								</div>
							</div>
						</div>

						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Close</button>
							<button type="submit" class="btn btn-success"><span class="glyphicon glyphicon-floppy-disk"></span> Save</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<div class="content-template" id="established-event-content-template" aria-hidden="true">
			<div class="established-food-location-popup">
				<p><b>%s</b></p>
			
				<ul>
					<li>Event category:  %s</li>
					<li>Event description:  %s</li>
					<li>Event Time:  %s</li>
					<li>Distance from current location:  %.2f miles</li>
				</ul>

				<p><b>Have you been to this event?</b><br></br>
				Check in to rank this location and leave feedback.</p>

				<div class="modal-footer">
					<button class="btn btn-default" onclick="mapManager.joinEvent(this.getAttribute('data-event-id')); return false;"><span class="glyphicon glyphicon-plus"></span> Join</button>				
					<button class="btn btn-info" onclick="mapManager.feedbackFoodLocation(this.getAttribute('data-food-location-id')); return false;"><span class="glyphicon glyphicon-heart-empty"></span> Feedback</button> 
				</div>
			</div>
		</div>

	<div class="content-template" id="simple-user-marker-content-template" aria-hidden="true">
		<div>
			<p><b>Your Current Location</b></p>
			<p>%f, %f</p>
		</div>
	</div>

	<div class="content-template" id="enhanced-user-marker-content-template" aria-hidden="true">
		<div>
			<p><b>Your Current Location</b></p>
			<p>%s</p>
		</div>
	</div>
	
	<div class="content-template" id="new-event-content-template" aria-hidden="true">
		<div class="new-event-location-popup">
				<p><b>New Event Location</b></p>
				
				<p>Drag the marker to a more precise location.</p>
				<p>Once the marker is positioned accurately, click the Edit New Event Detail button to provide more information about this event.</p>

				<div class="modal-footer">
					<button class="btn btn-default" onclick="mapManager.discardNewEvent(this.getAttribute('data-new-event-data-id')); return false;"><span class="glyphicon glyphicon-trash"></span> Discard</button>
					<button class="btn btn-success" onclick="mapManager.editNewEvent(this.getAttribute('data-new-event-data-id')); return false;"><span class="glyphicon glyphicon-pencil"></span> Edit New Event Location</button>
				</div>
		</div>
	</div>
		
</div>
</body>


</html>

